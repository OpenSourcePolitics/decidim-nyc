!function(){var e,t={78775:function(e,t,n){"use strict";n(58442),n(48866),n(22810),n(40686);$((function(){$("select.multiusers-select").each((function(){var e=$(this).attr("data-url");$(this).select2({ajax:{url:e,delay:100,dataType:"json",processResults:function(e){return{results:e}}},escapeMarkup:function(e){return e},templateSelection:function(e){return"".concat(e.text)},minimumInputLength:1,theme:"foundation"})}))}));n(47432);var a=n(4631),o=n.n(a);n(36629),n(23412);$((function(){$(".awesome-edit-config .scoped_styles_container textarea").each((function(e,t){o().fromTextArea(t,{lineNumbers:!0,mode:"css",keymap:"sublime"})}))}));n(4676);var r=n(94377),i=n(78153),c=n.n(i),s=n(97046),l=n.n(s),d=(n(75990),n(2299),n(96083),n(20637));n(7480),n(14243),n(6856);function u(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var m=window.DecidimAwesome||{},p=["bold","italic","link","underline","header","list","video","image","alt","break","width","style","code","blockquote","indent"];$((function(){$(".editor-container").each((function(e,t){!function(e){if(e){var t=$(e).find(".ql-editor").html();$(e).html(t),$(e).siblings(".ql-toolbar").remove(),$(e).find("*[class*='ql-']").removeClass((function(e,t){return(t.match(/(^|\s)ql-\S+/g)||[]).join(" ")})),$(e).removeClass((function(e,t){return(t.match(/(^|\s)ql-\S+/g)||[]).join(" ")})),$(e).next().is("p.help-text")&&$(e).next().remove()}else console.error("editor [".concat(e,"] not exists"))}(t),window.DecidimAwesome.use_markdown_editor?function(e){var t=m.texts.drag_and_drop_image,n=$('meta[name="csrf-token"]').attr("content"),a=$(e).siblings('input[type="hidden"]'),o=$('<textarea name="faker-inscrybmde"/>'),r=$(e).closest("form"),i=new(l());o.val(i.convert(a.val())),o.insertBefore($(e)),$(e).hide();var s=new(c())({element:o[0],spellChecker:!1,renderingConfig:{codeSyntaxHighlighting:!0,hljs:d.Z}});o[0].InscrybMDE=s,m.allow_images_in_markdown_editor&&($(s.gui.statusbar).prepend('<span class="help-text" style="float:left;margin:0;text-align:left;">'.concat(t,"</span>")),inlineAttachment.editors.codemirror4.attach(s.codemirror,{uploadUrl:m.editor_uploader_path,uploadFieldName:"image",jsonFieldName:"url",extraHeaders:{"X-CSRF-Token":n}})),r.on("submit",(function(){a.val(s.markdown(s.value()))}))}(t):function(e){var t=$(e).data("toolbar"),n=$(e).data("disabled"),a=[["bold","italic","underline","linebreak"],[{list:"ordered"},{list:"bullet"}],["link","clean"],["code","blockquote"],[{indent:"-1"},{indent:"+1"}]],o=!1;"full"===t?(a=[[{header:[2,3,4,5,6,!1]}]].concat(u(a)),m.allow_images_in_full_editor?(a.push(["video","image"]),o=!0):a.push(["video"])):"basic"===t?m.allow_images_in_small_editor?(a.push(["video","image"]),o=!0):a.push(["video"]):m.allow_images_in_small_editor&&(a.push(["image"]),o=!0);var i={linebreak:{},toolbar:{container:a,handlers:{linebreak:r.Z}}},c=$(e).siblings('input[type="hidden"]');e.innerHTML=c.val()||"";var s=$('meta[name="csrf-token"]').attr("content");o&&(i.imageResize={modules:["Resize","DisplaySize"]},i.imageUpload={url:$(e).data("uploadImagesPath")||m.editor_uploader_path,method:"POST",name:"image",withCredentials:!1,headers:{"X-CSRF-Token":s},callbackOK:function(e,t){$("div.ql-toolbar").last().removeClass("editor-loading"),t(e.url)},callbackKO:function(e){$("div.ql-toolbar").last().removeClass("editor-loading"),console.error("Image upload error: ".concat(e.message))},checkBeforeSend:function(e,t){$("div.ql-toolbar").last().addClass("editor-loading"),t(e)}});var l=new Quill(e,{modules:i,formats:p,theme:"snow"});if(n&&l.disable(),l.on("text-change",(function(){var t=l.getText(),n=new CustomEvent("quill-position",{detail:l.getSelection()});e.dispatchEvent(n),"\n"===t||"\n\n"===t?c.val(""):c.val(l.root.innerHTML)})),l.emitter.emit("editor-ready"),o){var d=$(e).data("dragAndDropHelpText")||m.texts.drag_and_drop_image;$(e).after('<p class="help-text" style="margin-top:-1.5rem;">'.concat(d,"</p>"))}l.emitter.emit("editor-ready")}(t)}))}));n(62526)},22810:function(){$((function(){var e=window.CustomFieldsBuilders||[];$("body").on("click","a.awesome-auto-edit",(function(t){t.preventDefault();var n=$(t.currentTarget),a=n.data("scope"),o=$('span.awesome-auto-edit[data-scope="'.concat(a,'"]')),r=$('.constraints-editor[data-key="'.concat(a,'"]'));if(0!=o.length){var i=o.data("key"),c=o.data("var"),s=$('[name="config['.concat(c,"][").concat(i,']"]')),l=$('[name="config['.concat(c,"][").concat(i,'][]"]')),d=$(".".concat(c,'_container[data-key="').concat(i,'"]')),u=$(".delete-box",d),f=function(e,t){o.text(e),o.attr("data-key",e),o.data("key",e),t&&(o.attr("data-scope",t),o.data("scope",t),n.attr("data-scope",t),n.data("scope",t)),n.show()};o.html('<input class="awesome-auto-edit" data-scope="'.concat(a,'" type="text" value="').concat(i,'">'));var m=$('input.awesome-auto-edit[data-scope="'.concat(a,'"]'));n.hide(),m.select(),m.on("keypress",(function(t){"Enter"!=t.code&&"13"!=t.code&&"10"!=t.code||(t.preventDefault(),$.ajax({type:"POST",url:DecidimAwesome.rename_scope_label_path,dataType:"json",headers:{"X-CSRF-Token":$("meta[name=csrf-token]").attr("content")},data:{key:i,scope:a,attribute:c,text:m.val()}}).done((function(t){return function(t){f(t.key,t.scope),r.replaceWith(t.html),s.attr("name","config[".concat(c,"][").concat(t.key,"]")),l.attr("name","config[".concat(c,"][").concat(t.key,"][]")),d.data("key",t.key),d.attr("data-key",t.key),u.attr("href",u.attr("href").replace("key=".concat(i),"key=".concat(t.key))),e.forEach((function(e){e.key==i&&(e.key=t.key)}))}(t)})).fail((function(e){console.error("Error saving key",i,"ERR:",e),f(i)})))})),m.on("blur",(function(){f(i)}))}}))}))},4676:function(){$((function(){$(".check-custom-redirections").on("click",(function(e){if(e.preventDefault(),!$(e.target).hasClass("disabled")){$(e.target).addClass("disabled");$("tr.custom-redirection").each((function(e,t){var n=$(t).find(".redirect-status");n.html('<span class="loading-spinner" />'),fetch($(t).data("origin"),{method:"HEAD",redirect:"manual"}).then((function(e){n.html(function(e,t){var n=$(e).data("item"),a=$(e).find(".redirect-status"),o=t.type,r=t.status;return"opaqueredirect"==t.type&&(o="redirect",r="302"),n.active?"redirect"==o?a.addClass("success"):a.addClass("alert"):a.addClass("muted"),"".concat(o," (").concat(r,")")}(t,e))})).catch((function(e){console.error("ERROR",e),n.removeClass("loading")}))}))}}))}))},48866:function(){$((function(){var e=$("#constraintsModal");e.length&&($(".decidim_awesome-form").on("click",".constraints-editor .add-condition,.constraints-editor .edit-condition",(function(t){t.preventDefault();var n=$(t.target),a=n.attr("href"),o=n.closest(".constraints-editor").find(".callout");o.hide(),o.removeClass("alert success"),e.find(".modal-content").html(""),e.addClass("loading"),e.data("url",a),e.foundation("open"),e.find(".modal-content").load(a,(function(){e.removeClass("loading")}))})),document.body.addEventListener("constraint:change",(function(t){var n=t.detail.map((function(e){return"".concat(e.key,"=").concat(e.value)})),a="".concat(e.data("url"),"&").concat(n.join("&"));e.addClass("loading"),e.find(".modal-content").load(a,(function(){e.removeClass("loading")}))})),document.body.addEventListener("ajax:error",(function(e){var t=$('.constraints-editor[data-key="'.concat(e.detail[0].key,'"]')).find(".callout");t.show(),t.contents("p").html("".concat(e.detail[0].message,": <strong>").concat(e.detail[0].error,"</strong>")),t.addClass("alert")})),document.body.addEventListener("ajax:success",(function(t){var n=$('.constraints-editor[data-key="'.concat(t.detail[0].key,'"]')),a=n.find(".callout");e.foundation("close"),a.show(),a.contents("p").html(t.detail[0].message),a.addClass("success"),n.replaceWith(t.detail[0].html)})))}))},47432:function(){$((function(){$("[data-tabs]").on("change.zf.tabs",(function(e){var t=$(e.target).closest(".label--tabs").next(".tabs-content").find(".tabs-panel.is-active"),n=t.find('[name="faker-inscrybmde"]');n.length>0&&n[0].InscrybMDE.codemirror.refresh(),(n=t.find(".proposal_custom_field:first")).length>0&&(window.DecidimAwesome.CustomFieldsRenderer.storeData(),window.DecidimAwesome.CustomFieldsRenderer.init(n))}))}))}},n={};function a(e){var o=n[e];if(void 0!==o)return o.exports;var r=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=t,e=[],a.O=function(t,n,o,r){if(!n){var i=1/0;for(d=0;d<e.length;d++){n=e[d][0],o=e[d][1],r=e[d][2];for(var c=!0,s=0;s<n.length;s++)(!1&r||i>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(c=!1,r<i&&(i=r));if(c){e.splice(d--,1);var l=o();void 0!==l&&(t=l)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,o,r]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e={4950:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,r,i=n[0],c=n[1],s=n[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(o in c)a.o(c,o)&&(a.m[o]=c[o]);if(s)var d=s(a)}for(t&&t(n);l<i.length;l++)r=i[l],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(d)},n=self.webpackChunkapp=self.webpackChunkapp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var o=a.O(void 0,[85,4112,7661,5889,166,5509,9281,2952,3978,5213,4377,7298,309,3755,4872,8729],(function(){return a(78775)}));o=a.O(o)}();
//# sourceMappingURL=decidim_admin_decidim_awesome-e54fe4effb4b63267988.js.map