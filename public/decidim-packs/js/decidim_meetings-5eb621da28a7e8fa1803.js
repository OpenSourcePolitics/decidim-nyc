!function(){var e={91958:function(e,t,n){var i={"./decidim/gamification/badges/decidim_gamification_badges_attended_meetings.svg":38912,"./decidim/meetings/decidim_meetings.svg":16612};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=91958},38912:function(e,t,n){"use strict";e.exports=n.p+"media/images/decidim_gamification_badges_attended_meetings-0a385f1bbe5a6e378d14.svg"},16612:function(e,t,n){"use strict";e.exports=n.p+"media/images/decidim_meetings-f1cb40f132fbc2fa9a00.svg"}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/decidim-packs/",function(){"use strict";function e(e,t,n){var i="".concat(e,"Name");if(n[i])return n[i];var o=t.attr("name"),r=/\[[^\]]+\]$/;return o.match(r)?o.replace(r,"[".concat(e,"]")):e}function t(t,n,i){var o=$.extend({},n),r=t.attr("id").split("_");r.pop();var a="".concat(r.join("_")),l="latitude",c="longitude";t.length>0&&(l=e("latitude",t,o),c=e("longitude",t,o));var u=$.extend({latitudeId:"".concat(a,"_latitude"),longitudeId:"".concat(a,"_longitude"),latitudeName:l,longitudeName:c},n),s=!1,d=function(e){!function(){var e=$("#".concat(u.latitudeId));e.length<1&&(e=$('<input type="hidden" name="'.concat(u.latitudeName,'" id="').concat(u.latitudeId,'" />')),t.after(e));var n=$("#".concat(u.longitudeId));n.length<1&&(n=$('<input type="hidden" name="'.concat(u.longitudeName,'" id="').concat(u.longitudeId,'" />')),t.after(n))}(),$("#".concat(u.latitudeId)).val(e[0]).attr("value",e[0]),$("#".concat(u.longitudeId)).val(e[1]).attr("value",e[1])};t.on("change.decidim",(function(){s||($("#".concat(u.latitudeId)).val("").removeAttr("value"),$("#".concat(u.longitudeId)).val("").removeAttr("value"))})),t.on("geocoder-suggest-coordinates.decidim",(function(e,t){d(t),s=!0,i(t)}));var p="".concat(t.data("coordinates")).split(",").map(parseFloat);Array.isArray(p)&&2===p.length&&d(p)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.controllerField=t.controllerField,this.wrapperSelector=t.wrapperSelector,this.dependentFieldsSelector=t.dependentFieldsSelector,this.dependentInputSelector=t.dependentInputSelector,this.enablingCondition=t.enablingCondition,this._bindEvent(),this._run()}var t,n,r;return t=e,(n=[{key:"_run",value:function(){var e=this.controllerField,t=e.parents(this.wrapperSelector).find(this.dependentFieldsSelector),n=t.find(this.dependentInputSelector);this.enablingCondition(e)?(n.prop("disabled",!1),t.show()):(n.prop("disabled",!0),t.hide())}},{key:"_bindEvent",value:function(){var e=this;this.controllerField.on("change",(function(){e._run()}))}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}$((function(){var e=$("#meeting_address");e.length>0&&t(e);var n,i=$(".meetings_form");if(i.length>0){var o=i.find("#meeting_type_of_meeting"),a=i.find(".field[data-meeting-type='online']"),l=i.find(".field[data-meeting-type='in_person']"),c=i.find(".field[data-meeting-type='online-access-level']"),u=function(e,t,n){var i=e.val();"hybrid"===i?t.show():(t.hide(),i===n&&t.show())};o.on("change",(function(e){var t=$(e.target),n=$("#meeting_iframe_embed_type").val();u(t,a,"online"),u(t,l,"in_person"),"none"===n?c.hide():u(t,c,"online")})),u(o,a,"online"),u(o,l,"in_person");var s=i.find("#meeting_registration_type"),d=i.find("#meeting_registration_terms"),p=i.find("#meeting_registration_url"),f=i.find("#meeting_available_slots");s.on("change",(function(e){var t=$(e.target);u(t,f,"on_this_platform"),u(t,d,"on_this_platform"),u(t,p,"on_different_platform")})),u(s,f,"on_this_platform"),u(s,d,"on_this_platform"),u(s,p,"on_different_platform"),n={controllerField:$("#meeting_iframe_embed_type"),wrapperSelector:".iframe-fields",dependentFieldsSelector:".iframe-fields--access-level",dependentInputSelector:"input",enablingCondition:function(e){return"none"!==e.val()}},new r(n)}}));var c=window.$,u="open",s=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;a(this,e),this.$element=t,this.$counter=i,this.questionsUrl=n.questionsUrl,this.pollingInterval=n.pollingInterval||5e3,this.mounted=!1,this.questions={}}var t,n,i;return t=e,(n=[{key:"isMounted",value:function(){return this.mounted}},{key:"mountComponent",value:function(){this.$element.length>0&&!this.mounted&&(this.mounted=!0,this._fetchQuestions())}},{key:"unmountComponent",value:function(){this.mounted&&(this.mounted=!1,this._stopPolling(),this.$element.html(""))}},{key:"_fetchQuestions",value:function(){var e=this;this._storeQuestionState(this.$element),c.ajax({url:this.questionsUrl,method:"GET",contentType:"application/javascript"}).done((function(){e._updateCounter(),e._setQuestionsState(e.$element),e._pollQuestions()}))}},{key:"_storeQuestionState",value:function(e){var t=this;c("[data-question]",e).each((function(e,n){var i=c(n),o=i.data("question");!0===i[0].open?t.questions[o]=u:t.questions[o]="closed"}))}},{key:"_setQuestionsState",value:function(e){var t=this;c("[data-question]",e).each((function(e,n){t._setQuestionState(c(n))}))}},{key:"_setQuestionState",value:function(e){var t=e.data("question"),n=this.questions[t];n?n===u&&e.prop(u,!0):e.addClass("is-new")}},{key:"_pollQuestions",value:function(){var e=this;this._stopPolling(),this.pollTimeout=setTimeout((function(){e._fetchQuestions()}),this.pollingInterval)}},{key:"_stopPolling",value:function(){this.pollTimeout&&clearTimeout(this.pollTimeout)}},{key:"_updateCounter",value:function(){if(this.$counter){var e=this.$element.find("details").length;this.$counter.html("(".concat(e,")"))}}}])&&l(t.prototype,n),i&&l(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),d="is-open";function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}$((function(){var e=$("[data-decidim-meetings-poll]"),t=$("#visible-questions-count");if(e.length){var n=new s(e,e.data("decidim-meetings-poll"),t);$(".meeting-polls__action-list").on("click",(function(t){t.preventDefault(),n.isMounted()?($(t.target).removeClass(d),e.removeClass(d),n.unmountComponent()):($(t.target).addClass(d),e.addClass(d),n.mountComponent())}))}var i=$("[data-decidim-admin-meetings-poll]");if(i.length){var o=new s(i,i.data("decidim-admin-meetings-poll"));$(".meeting-polls__action-administrate").on("click",(function(e){e.preventDefault(),o.isMounted()?($(e.target).removeClass(d),i.removeClass(d),o.unmountComponent()):($(e.target).addClass(d),i.addClass(d),o.mountComponent())}))}}));var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,e),this.wrapperField=t.wrapperField,this.controllerFieldSelector=t.controllerFieldSelector,this.dependentInputSelector=t.dependentInputSelector,this.controllerSelector=this.wrapperField.find(this.controllerFieldSelector),this._bindEvent(),this._run()}var t,n,i;return t=e,(n=[{key:"_run",value:function(){var e=this;this.controllerSelector.each((function(t,n){var i=$(n),o=i.is(":checked");i.parents("div.collection-input").find(e.dependentInputSelector).prop("disabled",!o)}))}},{key:"_bindEvent",value:function(){var e=this;this.controllerSelector.on("change",(function(){e._run()}))}}])&&f(t.prototype,n),i&&f(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this.wrapperField=t.wrapperField,this._bindEvent(),this._order(),this._normalize()}var t,n,i;return t=e,(n=[{key:"_order",value:function(){var e=$(this.wrapperField).find(".collection-input").length;$(this.wrapperField).find(".collection-input").each((function(t,n){for(var i=$(n).find("input[name$=\\[position\\]]"),o=i.val()?parseInt(i.val(),10):e,r=$(n).next();r.length>0;){var a=r.find("input[name$=\\[position\\]]");o>(a.val()?parseInt(a.val(),10):e)&&r.insertBefore($(n)),r=r.next()}}))}},{key:"_findLastPosition",value:function(){var e=0;return $(this.wrapperField).find(".collection-input").each((function(t,n){var i=$(n).find("input[name$=\\[position\\]]"),o=parseInt(i.val(),10);o>e&&(e=o)})),e}},{key:"_normalize",value:function(){$(this.wrapperField).find(".collection-input .position").each((function(e,t){var n=$(t).parent().find("input[name$=\\[position\\]]");n.val()&&(n.val(e),n.prop("disabled",!1),$(t).html("".concat(e+1,". ")))}))}},{key:"_bindEvent",value:function(){var e=this;$(this.wrapperField).find("input[type=checkbox]").on("change",(function(t){var n=$(t.target).parents("label"),i=n.find(".position"),o=n.find("input[name$=\\[position\\]]"),r=e._findLastPosition();t.target.checked?(o.val(r+1),o.prop("disabled",!1),i.html(r+1)):(o.val(""),o.prop("disabled",!0),i.html("")),e._order(),e._normalize()}))}}])&&m(t.prototype,n),i&&m(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b(this,e),this.wrapperField=t.wrapperField,this.type=t.type,this.conditionQuestion=t.conditionQuestion,this.answerOption=t.answerOption,this.mandatory=t.mandatory,this.value=t.value,this.onFulfilled=t.onFulfilled,this.bindEvent()}return _(e,[{key:"bindEvent",value:function(){this.checkCondition(),this.getInputsToListen().on("change",this.checkCondition.bind(this))}},{key:"getInputValue",value:function(){var e=$(".question[data-question-id='".concat(this.conditionQuestion,"']")),t=e.find("textarea, input[type='text']:not([name$=\\[custom_body\\]])");if(t.length)return t.val();var n=[];return e.find(".radio-button-collection, .check-box-collection").find(".collection-input").each((function(e,t){var i=$(t).find("input[name$=\\[body\\]]");if(i.is(":checked")){var o=$(t).find("input[name$=\\[custom_body\\]]").val(),r=i.val(),a=$(t).find("input[name$=\\[answer_option_id\\]]").val();n.push({id:a,value:r,text:o})}})),n}},{key:"getInputsToListen",value:function(){var e=$(".question[data-question-id='".concat(this.conditionQuestion,"']")),t=e.find("textarea, input[type='text']:not([name$=\\[custom_body\\]])");return t.length?t:e.find(".collection-input").find("input:not([type='hidden'])")}},{key:"checkAnsweredCondition",value:function(e){return"object"!==y(e)?Boolean(e):Boolean(e.some((function(e){return e.value})))}},{key:"checkNotAnsweredCondition",value:function(e){return!this.checkAnsweredCondition(e)}},{key:"checkEqualCondition",value:function(e){var t=this;return!!e.length&&e.some((function(e){return e.id===t.answerOption.toString()}))}},{key:"checkNotEqualCondition",value:function(e){var t=this;return!!e.length&&e.every((function(e){return e.id!==t.answerOption.toString()}))}},{key:"checkMatchCondition",value:function(e){var t=new RegExp(this.value,"i");return"object"!==y(e)?Boolean(e.match(t)):e.some((function(e){return e.text?e.text.match(t):e.value.match(t)}))}},{key:"checkCondition",value:function(){var e=this.getInputValue(),t=!1;switch(this.type){case"answered":t=this.checkAnsweredCondition(e);break;case"not_answered":t=this.checkNotAnsweredCondition(e);break;case"equal":t=this.checkEqualCondition(e);break;case"not_equal":t=this.checkNotEqualCondition(e);break;case"match":t=this.checkMatchCondition(e);break;default:t=!1}this.onFulfilled(t)}}]),e}(),F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b(this,e),this.wrapperField=t.wrapperField,this.conditions={},this.showCount=0,this.initializeConditions()}return _(e,[{key:"initializeConditions",value:function(){var e=this;this.wrapperField.find(".display-condition").each((function(t,n){var i=$(n),o=i.data("id");e.conditions[o]={},e.conditions[o]=new k({wrapperField:e.wrapperField,type:i.data("type"),conditionQuestion:i.data("condition"),answerOption:i.data("option"),mandatory:i.data("mandatory"),value:i.data("value"),onFulfilled:function(t){e.onFulfilled(o,t)}})}))}},{key:"mustShow",value:function(){var e=Object.values(this.conditions),t=e.filter((function(e){return e.mandatory})),n=e.filter((function(e){return!e.mandatory}));return t.length?t.every((function(e){return e.fulfilled})):n.some((function(e){return e.fulfilled}))}},{key:"onFulfilled",value:function(e,t){this.conditions[e].fulfilled=t,this.mustShow()?this.showQuestion():this.hideQuestion()}},{key:"showQuestion",value:function(){this.wrapperField.fadeIn(),this.wrapperField.find("input, textarea").prop("disabled",null),this.showCount++}},{key:"hideQuestion",value:function(){this.showCount?this.wrapperField.fadeOut():this.wrapperField.hide(),this.wrapperField.find("input, textarea").prop("disabled","disabled")}}]),e}();function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};C(this,e),this.wrapperField=t.wrapperField,this.alertElement=t.alertElement,this.controllerFieldSelector=t.controllerFieldSelector,this.controllerCollectionSelector=t.controllerCollectionSelector,this.maxChoices=t.maxChoices,this.controllerSelector=this.wrapperField.find(this.controllerFieldSelector),this._bindEvent(),this._run()}var t,n,i;return t=e,(n=[{key:"_run",value:function(){var e=this,t=this.wrapperField.find(this.controllerCollectionSelector),n=!1;t.each((function(t,i){var o=$(i).find(e.controllerFieldSelector).filter((function(e,t){return $(t).is(":checked")}));n=n||o.length>e.maxChoices})),n?this.alertElement.show():this.alertElement.hide()}},{key:"_bindEvent",value:function(){var e=this;this.controllerSelector.on("change",(function(){e._run()}))}}])&&S(t.prototype,n),i&&S(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();$((function(){$(".radio-button-collection, .check-box-collection").each((function(e,t){var n;n={wrapperField:$(t),controllerFieldSelector:"input[type=radio], input[type=checkbox]",dependentInputSelector:"input[type=text], input[type=hidden]"},new h(n)})),$.unique($(".check-box-collection").parents(".answer")).each((function(e,t){var n,i=$(t).data("max-choices");i&&(n={wrapperField:$(t),controllerFieldSelector:"input[type=checkbox]",controllerCollectionSelector:".check-box-collection",alertElement:$(t).find(".max-choices-alert"),maxChoices:i},new x(n))})),$(".sortable-check-box-collection").each((function(e,t){var n;n={wrapperField:$(t)},new g(n)})),$(".answer-questionnaire .question[data-conditioned='true']").each((function(e,t){var n;n={wrapperField:$(t)},new F(n)}));var e=$("form.answer-questionnaire");if(e.length>0){e.find("input, textarea, select").on("change",(function(){e.data("changed",!0)}));var t=e.data("safe-path").split("?")[0];$(document).on("click","a",(function(e){window.exitUrl=e.currentTarget.href})),$(document).on("submit","form",(function(e){window.exitUrl=e.currentTarget.action})),window.addEventListener("beforeunload",(function(n){var i=window.exitUrl,o=e.data("changed");window.exitUrl=null,!o||i&&i.includes(t)||(n.returnValue=!0)}))}})),n(91958)}()}();
//# sourceMappingURL=decidim_meetings-5eb621da28a7e8fa1803.js.map